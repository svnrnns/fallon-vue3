(function(t,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(t=typeof globalThis<"u"?globalThis:t||self,t.fallon=r(t.Vue))})(this,function(t){"use strict";var p=(t,r,n)=>{if(!r.has(t))throw TypeError("Cannot "+n)};var a=(t,r,n)=>(p(t,r,"read from private field"),n?n.call(t):r.get(t)),g=(t,r,n)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,n)},m=(t,r,n,f)=>(p(t,r,"write to private field"),f?f.call(t,n):r.set(t,n),n);var s;class r extends Error{constructor(e){super(e),this.name="FallonClassError"}}class n extends Error{constructor(e){super(e),this.name="FallonStorageError"}}function f(l){return l!==null&&typeof l=="object"&&!Array.isArray(l)}function y(l){try{const e=JSON.parse(l);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}function d(l){return y(l)?JSON.parse(l):l}class S{constructor(e){g(this,s,void 0);e&&this.setNamespace(e)}getNamespace(){return a(this,s)}setNamespace(e){if(!e)throw new r("Namespace variable not provided");if(typeof e!="string")throw new r("Namespace variable must be of type string");m(this,s,e)}exists(e){const o=typeof a(this,s)<"u"?a(this,s)+e:e;return localStorage.getItem(o)!==null}get(e,o=!1){const i=typeof a(this,s)<"u"?a(this,s)+e:e,u=localStorage.getItem(i);if(u===null)throw new n("The key "+i+" does not exists in the local storage");if(!o)return d(u);const c=t.ref(d(u));return setInterval(()=>{const h=localStorage.getItem(i);h!=c.value&&(c.value=d(h))},100),c}set(e,o){if(!e)throw new n("Key value not provided");const i=typeof a(this,s)<"u"?a(this,s)+e:e,u=f(o)?JSON.stringify(o):o;localStorage.setItem(i,u)}bind(e,o){if(!e)throw new n("Key value not provided");if(o==null&&typeof o!="object")throw new r("Variable must be a Vue reactive object (ref/computed)");const i=()=>{const u=typeof a(this,s)<"u"?a(this,s)+e:e,c=f(o.value)?JSON.stringify(o.value):o.value;localStorage.setItem(u,c)};t.watch(o,()=>{i()})}delete(e){localStorage.removeItem(e)}clear(){localStorage.clear()}length(){return localStorage.length}}return s=new WeakMap,S});
