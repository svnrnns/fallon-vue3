(function(t,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(t=typeof globalThis<"u"?globalThis:t||self,t.fallon=r(t.Vue))})(this,function(t){"use strict";var h=(t,r,o)=>{if(!r.has(t))throw TypeError("Cannot "+o)};var u=(t,r,o)=>(h(t,r,"read from private field"),o?o.call(t):r.get(t)),p=(t,r,o)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,o)},g=(t,r,o,c)=>(h(t,r,"write to private field"),c?c.call(t,o):r.set(t,o),o);var a;class r extends Error{constructor(e){super(e),this.name="FallonClassError"}}class o extends Error{constructor(e){super(e),this.name="FallonStorageError"}}function c(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}function m(n){try{const e=JSON.parse(n);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}function d(n){return m(n)?JSON.parse(n):n}class y{constructor(e){p(this,a,void 0);e&&this.setNamespace(e)}getNamespace(){return u(this,a)}setNamespace(e){if(!e)throw new r("Namespace variable not provided");if(typeof e!="string")throw new r("Namespace variable must be of type string");g(this,a,e)}get(e,s=!1){const l=localStorage.getItem(e);if(l===null)throw new o("The key does not exists in the local storage");if(!s)return d(l);const i=t.ref(d(l));return setInterval(()=>{const f=localStorage.getItem(e);f!=i.value&&(i.value=d(f))},100),i}set(e,s){if(!e)throw new o("Key value not provided");const l=typeof u(this,a)<"u"?u(this,a)+e:e,i=c(s)?JSON.stringify(s):s;localStorage.setItem(l,i)}bind(e,s){if(!e)throw new o("Key value not provided");if(s==null&&typeof s!="object")throw new r("Variable must be a Vue reactive object (ref/computed)");const l=()=>{const i=typeof u(this,a)<"u"?u(this,a)+e:e,f=c(s.value)?JSON.stringify(s.value):s.value;localStorage.setItem(i,f)};t.watch(s,()=>{l()})}delete(e){localStorage.removeItem(e)}clear(){localStorage.clear()}length(){return localStorage.length}}return a=new WeakMap,y});
